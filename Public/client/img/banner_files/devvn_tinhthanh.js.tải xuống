!function(a){a(document).ready(function(){var b={formatNoMatches:ghn_array.formatNoMatches},c=loading_shipping=!1,d=a("#billing_city_field"),e=a("#shipping_city_field");a("#billing_state").select2(b),a("#billing_city").select2(b),a("body #billing_state").on("select2:select",function(b){a("#billing_city option").val("");var e=b.val;e||(e=a("#billing_state option:selected").val()),e&&!c&&(c=!0,a.ajax({type:"post",dataType:"json",url:ghn_array.admin_ajax,data:{action:"load_diagioihanhchinh",matp:e},context:this,beforeSend:function(){d.addClass("devvn_loading")},success:function(b){if(c=!1,a("#billing_city").html("").select2(),b.success){var e=b.data,f=new Option("","");a("#billing_city").append(f),a.each(e,function(b,c){var d=new Option(c.WardName,c.WardCode);a("#billing_city").append(d)})}d.removeClass("devvn_loading")}}))}),a("#shipping_state").select2(b),a("#shipping_city").select2(b),a("body #shipping_state").on("select2:select",function(b){a("#shipping_city option").val("");var c=b.val;c||(c=a("#shipping_state option:selected").val()),c&&!loading_shipping&&(loading_shipping=!0,a.ajax({type:"post",dataType:"json",url:ghn_array.admin_ajax,data:{action:"load_diagioihanhchinh",matp:c},context:this,beforeSend:function(){e.addClass("devvn_loading")},success:function(b){if(loading_shipping=!1,a("#shipping_city").html("").select2(),b.success){var c=b.data,d=new Option("","");a("#shipping_city").append(d),a.each(c,function(b,c){var d=new Option(c.WardName,c.WardCode);a("#shipping_city").append(d)})}e.removeClass("devvn_loading")}}))}),a(window).load(function(){a("#shipping_city option, #billing_city option").length<=1&&a("body #shipping_state").trigger("select2:select")}),a("#calc_shipping_city_field").length>0&&a(document.body).bind("country_to_state_changed updated_wc_div",function(){{var b=a("#calc_shipping_city_field #calc_shipping_city");b.val(),a("#calc_shipping_state").val()}b.select2();var e=!1,f=function(c){c&&!e&&a.ajax({type:"post",dataType:"json",url:ghn_array.admin_ajax,data:{action:"load_diagioihanhchinh",matp:c},context:this,beforeSend:function(){e=!0},success:function(c){if(e=!1,c.success){var d=c.data,f=[];a.each(d,function(a,b){f.push({id:b.WardCode,text:b.WardName})}),b.html("").select2({placeholder:"Ch\u1ecdn qu\u1eadn/huy\u1ec7n",data:f})}}})},g=function(){a("body select.state_select:visible").each(function(){f(a(this).val()),a(this,"body").on("change select2:select",function(){f(a(this).val())})})};g()})})}(jQuery);